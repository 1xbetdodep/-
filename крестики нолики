def печать_поля(поле):
    for строка in поле:
        print(" | ".join(строка))
        print("-" * 9)


def проверка_завершенности(поле):
    # Проверка строк
    for строка in поле:
        if строка[0] == строка[1] == строка[2] != " ":
            return True
    
    # Проверка столбцов
    for col in range(3):
        if поле[0][col] == поле[1][col] == поле[2][col] != " ":
            return True
    
    # Проверка диагоналей
    if поле[0][0] == поле[1][1] == поле[2][2] != " ":
        return True
    if поле[0][2] == поле[1][1] == поле[2][0] != " ":
        return True
    
    return False


def проверка_ввода(ввод):
    if ввод.isdigit():
        номер = int(ввод) - 1
        if 0 <= номер < 9:
            return номер
    return None


def игра_в_крестики_нолики():
    поле = [[" " for _ in range(3)] for _ in range(3)]
    текущий_игрок = "X"
    ход = 0

    while ход < 9:
        печать_поля(поле)
        ввод = input(f"Игрок {текущий_игрок}, введите номер клетки (1-9): ")
        номер = проверка_ввода(ввод)

        if номер is not None:
            строка = номер // 3
            столбец = номер % 3
            if поле[строка][столбец] == " ":
                поле[строка][столбец] = текущий_игрок
                ход += 1

                if проверка_завершенности(поле):
                    печать_поля(поле)
                    print(f"Игрок {текущий_игрок} выиграл!")
                    return

                текущий_игрок = "O" if текущий_игрок == "X" else "X"
            else:
                print("Эта клетка уже занята. Попробуйте снова.")
        else:
            print("Некорректный ввод. Введите число от 1 до 9.")

    печать_поля(поле)
    print("Игра закончилась вничью!")


игра_в_крестики_нолики()
